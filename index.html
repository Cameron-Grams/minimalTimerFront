<!-- DOCTYPE html -->
<html>
<head>
<title>Minimal Timer</title>
<style>
	body{
		background-color: #e2b83b;
		color: #3f3e3b;
	}

	.mainContainerDiv{
		height: 100vh;
		display: flex;
		justify-content: center;
		align-items: flex-start;
	}

	.innerContainer{
		flex: 1;
		text-align: center;
		height: 100px;
	}

	.spacer{
		heigh: 200px;
	}

</style>

</head>
<body>

	<div class="mainContainerDiv"> 
		<div class="innerContainer">
		<div class="spacer"></div>
		<div >
			<h1 id="timerCount" >Cloze Developer</h1>
			<p id="introText">This is the launch for the Cloze Maker application.</p>
			<p id="warningText"></p>
		</div>
		<div><button onclick="beginProcess()">Click to leave</button></div>    
		<div><button onclick="stopCount()" >Stop it</button></div>
        </div>
    </div>

<script>

// var endpoint = 'http://localhost:8888'; 
var endpoint = 'https://cloze-maker.herokuapp.com';

let count = 0;
var currentTimer

function beginProcess(){
	document.getElementById( "introText" ).innerHTML = "Please wait while we retrieve the needed resources."
	document.getElementById( "warningText" ).innerHTML ="If the count reaches 50 please refresh the screen and try again."
	changeLocation();
	startCount();
}

function increment(){
	console.log( ' in the increment function with count: ', count );

	count += 1;
	document.getElementById( "timerCount" ).innerHTML = count;
}

function startCount(){
    currentTimer = setInterval( increment, 1000);

}

function stopCount(){
	clearInterval( currentTimer );
}

function changeLocation(){
	const dynoURL = `${ endpoint }`;
	const dyno = fetch(dynoURL);

	dyno
	.then(() => {
	location.href= dynoURL;
	})
}



</script>
</body>

</html>







